<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Compound Interest Calculator (Inflation-Adjusted)</title>
    <meta
      name="description"
      content="Interactive compound interest calculator in today's dollars across four annual return scenarios."
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="app-shell">
      <header class="page-header">
        <div class="page-header-main">
          <h1>Compound Interest Calculator</h1>
          <p class="subtitle">
            Inflation-adjusted projections in today's dollars using real monthly rates.
          </p>
        </div>
        <p class="version-stamp" id="app-version" aria-live="polite"></p>
      </header>

      <section class="panel output-toolbar" aria-label="Output controls">
        <div class="view-toggle-group" role="group" aria-label="Value display mode">
          <span id="mode-real-label" class="mode-side-label is-active">Real (today&rsquo;s $)</span>
          <button
            id="view-mode-toggle"
            class="mode-toggle-switch"
            type="button"
            role="switch"
            aria-checked="false"
            aria-label="Toggle between real and nominal values"
          >
            <span class="mode-toggle-thumb"></span>
          </button>
          <span id="mode-nominal-label" class="mode-side-label">Nominal (actual $)</span>
        </div>
        <div class="output-actions-group">
          <button id="copy-share-link" type="button">Copy share link</button>
          <button id="download-csv" type="button">Download CSV</button>
        </div>
      </section>
      <p id="action-message" class="helper action-message" role="status" aria-live="polite"></p>

      <section class="top-grid" aria-label="Inputs and summary">
        <form id="calculator-form" class="panel input-panel" novalidate>
          <h2>Inputs</h2>
          <div class="advanced-toggle-row">
            <span class="advanced-toggle-label">Show advanced</span>
            <button
              id="show-advanced"
              class="advanced-toggle-switch"
              type="button"
              role="switch"
              aria-checked="false"
              aria-label="Toggle advanced inputs"
            >
              <span class="advanced-toggle-thumb"></span>
            </button>
          </div>
          <p id="assumption-text" class="helper">
            Results are shown in today&rsquo;s dollars. The calculator adjusts each annual return
            for inflation and compounds monthly over your selected timeline.
          </p>
          <details class="math-details">
            <summary>Show calculation details</summary>
            <p>
              Real monthly rate:
              <code>((1 + annualRate) / (1 + inflationRate))^(1/12) - 1</code>
            </p>
            <p>
              Future value per year uses end-of-month contributions and the worksheet-aligned
              inflation-adjusted monthly compounding model.
            </p>
          </details>

          <div class="form-grid core-input-grid">
            <label class="field">
              <span>Initial contribution</span>
              <input
                id="initialInvestment"
                name="initialInvestment"
                type="number"
                inputmode="decimal"
                min="0"
                step="100"
                aria-describedby="assumption-text"
              />
            </label>

            <label class="field">
              <span>Monthly contribution</span>
              <input
                id="monthlyInvestment"
                name="monthlyInvestment"
                type="number"
                inputmode="decimal"
                min="0"
                step="10"
                aria-describedby="assumption-text"
              />
              <span class="field-note">Will increase with inflation</span>
              <span id="coffee-equivalent-note" class="field-note" aria-live="polite"></span>
            </label>

            <label class="field">
              <span>Projection length (years)</span>
              <input
                id="years"
                name="years"
                type="number"
                inputmode="numeric"
                min="1"
                max="60"
                step="1"
                aria-describedby="validation-message"
              />
            </label>

            <label class="field">
              <span>Inflation rate (%)</span>
              <input
                id="inflationRate"
                name="inflationRate"
                type="number"
                inputmode="decimal"
                step="0.1"
                aria-describedby="assumption-text"
              />
            </label>
          </div>

          <div id="advanced-fields" class="advanced-fields is-hidden" aria-hidden="true">
            <div class="form-grid">
              <label class="field">
                <span>Stop contributions after (years)</span>
                <input
                  id="contributionYears"
                  name="contributionYears"
                  type="number"
                  inputmode="numeric"
                  min="0"
                  max="60"
                  step="1"
                  placeholder="Leave blank to disable"
                  aria-describedby="assumption-text validation-message"
                />
                <span class="field-note">Monthly contributions are added for this many years, then stop.</span>
              </label>

              <label class="field">
                <span>Start withdrawing at year</span>
                <input
                  id="startWithdrawalYear"
                  name="startWithdrawalYear"
                  type="number"
                  inputmode="numeric"
                  min="1"
                  max="60"
                  step="1"
                  placeholder="Leave blank to disable"
                  aria-describedby="assumption-text validation-message"
                />
                <span class="field-note">Will adjust to inflation</span>
              </label>

              <label class="field">
                <span>Withdraw amount per month</span>
                <input
                  id="monthlyWithdrawal"
                  name="monthlyWithdrawal"
                  type="number"
                  inputmode="decimal"
                  min="0"
                  step="10"
                  value="0"
                  aria-describedby="assumption-text validation-message"
                />
              </label>
            </div>
          </div>

          <fieldset class="rates-group" aria-describedby="assumption-text">
            <legend>Return scenarios (annual %)</legend>
            <div class="form-grid rates-input-grid">
            <label class="field rate-field" id="rate-field-1">
              <span class="rate-label-row">
                <input id="rateEnabled1" name="rateEnabled1" type="checkbox" checked />
                <span>Rate 1 (%)</span>
              </span>
              <input id="rate1" name="rate1" type="number" inputmode="decimal" step="0.1" />
            </label>

            <label class="field rate-field" id="rate-field-2">
              <span class="rate-label-row">
                <input id="rateEnabled2" name="rateEnabled2" type="checkbox" checked />
                <span>Rate 2 (%)</span>
              </span>
              <input id="rate2" name="rate2" type="number" inputmode="decimal" step="0.1" />
            </label>

            <label class="field rate-field" id="rate-field-3">
              <span class="rate-label-row">
                <input id="rateEnabled3" name="rateEnabled3" type="checkbox" checked />
                <span>Rate 3 (%)</span>
              </span>
              <input id="rate3" name="rate3" type="number" inputmode="decimal" step="0.1" />
            </label>

            <label class="field rate-field" id="rate-field-4">
              <span class="rate-label-row">
                <input id="rateEnabled4" name="rateEnabled4" type="checkbox" checked />
                <span>Rate 4 (%)</span>
              </span>
              <input id="rate4" name="rate4" type="number" inputmode="decimal" step="0.1" />
            </label>
            </div>
          </fieldset>

          <div class="actions">
            <button id="reset-button" type="button">Reset defaults</button>
          </div>

          <p id="validation-message" class="warning" role="status" aria-live="polite"></p>
        </form>

        <section class="panel summary-panel" aria-label="Summary metrics">
          <h2>Summary</h2>
          <div class="summary-root" id="summary-grid"></div>
        </section>
      </section>

      <section class="panel chart-panel" aria-label="Projection chart">
        <div class="section-head">
          <h2 id="projection-title">Projection</h2>
          <p id="chart-subtitle" class="helper">Year-by-year value across 4 scenarios.</p>
        </div>
        <div id="chart-wrapper" class="chart-wrapper"></div>
        <ul id="chart-legend" class="chart-legend" aria-label="Rate legend"></ul>
      </section>

      <section class="panel table-panel" aria-label="Projection table">
        <div class="section-head">
          <h2>Year-by-Year Table</h2>
        </div>
        <div class="table-compact-controls" id="table-compact-controls" aria-label="Mobile table scenario selection"></div>
        <div class="table-scroll">
          <table id="projection-table" data-mobile-scenario="0">
            <thead>
              <tr>
                <th scope="col">Year</th>
                <th scope="col" id="rate1-header">Rate 1</th>
                <th scope="col" id="rate2-header">Rate 2</th>
                <th scope="col" id="rate3-header">Rate 3</th>
                <th scope="col" id="rate4-header">Rate 4</th>
                <th scope="col" id="cumulative-withdrawn-header" class="is-hidden">Cumulative Withdrawn</th>
              </tr>
            </thead>
            <tbody id="projection-table-body"></tbody>
          </table>
        </div>
      </section>

      <footer class="page-footer">
        <p>
          Educational projection tool. Estimates are illustrative and not financial advice.
        </p>
      </footer>
    </main>

    <script type="module" src="./app.js"></script>
  </body>
</html>
